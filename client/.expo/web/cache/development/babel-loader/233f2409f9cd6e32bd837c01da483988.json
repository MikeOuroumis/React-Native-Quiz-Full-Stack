{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React from \"react\";\nimport Button from \"./Button\";\nimport { useEffect, useState } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function RegisterScreen(props) {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    isValid = _React$useState2[0],\n    setIsValid = _React$useState2[1];\n  var _React$useState3 = React.useState({\n      email: \"\",\n      password: \"\",\n      name: \"\"\n    }),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    user = _React$useState4[0],\n    setUser = _React$useState4[1];\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    usersArray = _useState2[0],\n    setUsersArray = _useState2[1];\n  var _useState3 = useState({\n      name: null,\n      email: null,\n      password: null\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    errorMessages = _useState4[0],\n    setErrorMessages = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userIsNew = _useState6[0],\n    setUserIsNew = _useState6[1];\n  useEffect(function () {\n    var data = localStorage.getItem(\"usersArray\");\n    data && setUsersArray(JSON.parse(data));\n  }, []);\n  useEffect(function () {\n    isValid && localStorage.setItem(\"usersArray\", JSON.stringify(usersArray));\n  }, [usersArray]);\n  function handleChange(event) {\n    setUser(function (prevUser) {\n      return _objectSpread(_objectSpread({}, prevUser), {}, _defineProperty({}, event.target.name, event.target.value));\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    setErrorMessages(validation());\n    console.log(\"is valid: \" + isValid);\n    for (var item of usersArray) {\n      if (user.email === item.email) {\n        setUserIsNew(false);\n        userIsNew = false;\n      } else {\n        setUserIsNew(true);\n        userIsNew = true;\n      }\n    }\n    console.log(userIsNew);\n    if (isValid && userIsNew) setUsersArray(function (prevArray) {\n      return [].concat(_toConsumableArray(prevArray), [user]);\n    });\n  }\n  function validation() {\n    var errors = {};\n    if (user.email.trim() === \"\") errors.email = \"Please fill in the email\";else errors.email = null;\n    if (user.password.trim() === \"\") errors.password = \"Please fill in the password\";else errors.password = null;\n    if (user.name.trim() === \"\") errors.name = \"Please fill in the name\";else errors.name = null;\n    errors.name === null && errors.email === null && errors.password === null ? isValid = true : isValid = false;\n    setIsValid(isValid);\n    return errors;\n  }\n  return _jsxs(\"div\", {\n    className: \"quiz-container\",\n    children: [_jsx(\"h1\", {\n      style: {\n        color: \"#0c88fb\"\n      },\n      children: \"Register\"\n    }), _jsx(\"br\", {}), _jsxs(\"form\", {\n      onSubmit: handleSubmit,\n      children: [_jsx(\"label\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"Name\"\n      }), _jsx(\"br\", {}), _jsx(\"input\", {\n        className: \"form-control\",\n        id: \"name\",\n        placeholder: \"name\",\n        onChange: handleChange,\n        name: \"name\",\n        value: user.name\n      }), errorMessages.name && _jsx(\"div\", {\n        className: \"errorMessages\",\n        children: errorMessages.name\n      }), _jsx(\"br\", {}), _jsx(\"label\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"Email\"\n      }), _jsx(\"br\", {}), _jsx(\"input\", {\n        className: \"form-control\",\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"email\",\n        onChange: handleChange,\n        name: \"email\",\n        value: user.email\n      }), errorMessages.email && _jsx(\"div\", {\n        className: \"errorMessages\",\n        children: errorMessages.email\n      }), _jsx(\"br\", {}), _jsx(\"label\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"Password\"\n      }), _jsx(\"br\", {}), _jsx(\"input\", {\n        className: \"form-control\",\n        type: \"password\",\n        id: \"password\",\n        placeholder: \"password\",\n        onChange: handleChange,\n        name: \"password\",\n        value: user.password\n      }), _jsx(\"br\", {}), errorMessages.password && _jsx(\"div\", {\n        className: \"errorMessages\",\n        children: errorMessages.password\n      }), \" \", _jsx(\"br\", {}), _jsx(Button, {\n        type: \"submit\",\n        text: \"Submit\"\n      })]\n    }), _jsxs(\"p\", {\n      className: \"errorMessages\",\n      children: [!userIsNew && \"The user already exists\", \" \"]\n    }), _jsx(\"br\", {}), _jsxs(\"div\", {\n      children: [\"Already have an account? Log in\", \" \", _jsx(\"button\", {\n        className: \"btn btn-link\",\n        onClick: props.registerLogilToggle,\n        style: {\n          padding: \"0\",\n          marginTop: \"-5px\"\n        },\n        children: \"here\"\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","Button","useEffect","useState","RegisterScreen","props","isValid","setIsValid","email","password","name","user","setUser","usersArray","setUsersArray","errorMessages","setErrorMessages","userIsNew","setUserIsNew","data","localStorage","getItem","JSON","parse","setItem","stringify","handleChange","event","prevUser","target","value","handleSubmit","preventDefault","validation","console","log","item","prevArray","errors","trim","color","registerLogilToggle","padding","marginTop"],"sources":["C:/Users/micha/Desktop/AwesomeProject/components/RegisterScreen.js"],"sourcesContent":["import React from \"react\";\r\nimport Button from \"./Button\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function RegisterScreen(props) {\r\n  let [isValid, setIsValid] = React.useState(false);\r\n\r\n  const [user, setUser] = React.useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    name: \"\",\r\n  });\r\n\r\n  const [usersArray, setUsersArray] = useState([]);\r\n\r\n  const [errorMessages, setErrorMessages] = useState({\r\n    name: null,\r\n    email: null,\r\n    password: null,\r\n  });\r\n\r\n  let [userIsNew, setUserIsNew] = useState(true);\r\n\r\n  useEffect(() => {\r\n    //logic for getting a value from local storage stored under the key 'key'\r\n    const data = localStorage.getItem(\"usersArray\");\r\n    //if data is null don't run the next line...\r\n    data && setUsersArray(JSON.parse(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    //stores the user only if the form is valid\r\n    isValid && localStorage.setItem(\"usersArray\", JSON.stringify(usersArray));\r\n  }, [usersArray]);\r\n\r\n  function handleChange(event) {\r\n    setUser((prevUser) => ({\r\n      ...prevUser,\r\n      [event.target.name]: event.target.value,\r\n    }));\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    setErrorMessages(validation());\r\n    //no errors? store name, email, password to the database\r\n    console.log(`is valid: ${isValid}`);\r\n\r\n    for (const item of usersArray) {\r\n      if (user.email === item.email) {\r\n        setUserIsNew(false);\r\n        userIsNew = false;\r\n      } else {\r\n        setUserIsNew(true);\r\n        userIsNew = true;\r\n      }\r\n    }\r\n    console.log(userIsNew);\r\n    if (isValid && userIsNew)\r\n      setUsersArray((prevArray) => [...prevArray, user]);\r\n  }\r\n\r\n  function validation() {\r\n    const errors = {};\r\n    if (user.email.trim() === \"\") errors.email = \"Please fill in the email\";\r\n    else errors.email = null;\r\n    if (user.password.trim() === \"\")\r\n      errors.password = \"Please fill in the password\";\r\n    else errors.password = null;\r\n    if (user.name.trim() === \"\") errors.name = \"Please fill in the name\";\r\n    else errors.name = null;\r\n\r\n    errors.name === null && errors.email === null && errors.password === null\r\n      ? (isValid = true)\r\n      : (isValid = false);\r\n    setIsValid(isValid);\r\n\r\n    return errors;\r\n  }\r\n\r\n  return (\r\n    <div className=\"quiz-container\">\r\n      <h1 style={{ color: \"#0c88fb\" }}>Register</h1>\r\n      <br />\r\n      <form onSubmit={handleSubmit}>\r\n        <label style={{ color: \"white\" }}>Name</label>\r\n        <br />\r\n        <input\r\n          className=\"form-control\"\r\n          id=\"name\"\r\n          placeholder=\"name\"\r\n          onChange={handleChange}\r\n          name=\"name\"\r\n          value={user.name}\r\n        ></input>\r\n        {errorMessages.name && (\r\n          <div className=\"errorMessages\">{errorMessages.name}</div>\r\n        )}\r\n        <br />\r\n        <label style={{ color: \"white\" }}>Email</label>\r\n        <br />\r\n        <input\r\n          className=\"form-control\"\r\n          id=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"email\"\r\n          onChange={handleChange}\r\n          name=\"email\"\r\n          value={user.email}\r\n        ></input>\r\n        {errorMessages.email && (\r\n          <div className=\"errorMessages\">{errorMessages.email}</div>\r\n        )}\r\n        <br />\r\n        <label style={{ color: \"white\" }}>Password</label>\r\n        <br />\r\n        <input\r\n          className=\"form-control\"\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"password\"\r\n          onChange={handleChange}\r\n          name=\"password\"\r\n          value={user.password}\r\n        ></input>\r\n        <br />\r\n        {errorMessages.password && (\r\n          <div className=\"errorMessages\">{errorMessages.password}</div>\r\n        )}{\" \"}\r\n        <br />\r\n        <Button type=\"submit\" text=\"Submit\" />\r\n      </form>\r\n      <p className=\"errorMessages\">\r\n        {!userIsNew && \"The user already exists\"}{\" \"}\r\n      </p>\r\n      <br />\r\n      <div>\r\n        Already have an account? Log in{\" \"}\r\n        <button\r\n          className=\"btn btn-link\"\r\n          onClick={props.registerLogilToggle}\r\n          style={{ padding: \"0\", marginTop: \"-5px\" }}\r\n        >\r\n          here\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}