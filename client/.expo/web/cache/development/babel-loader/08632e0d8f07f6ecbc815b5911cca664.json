{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useEffect } from \"react\";\nimport Button from \"./Button\";\nimport RegisterScreen from \"./RegisterScreen\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function LoginScreen(props) {\n  var _React$useState = React.useState({\n      email: \"\",\n      password: \"\"\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    user = _React$useState2[0],\n    setUser = _React$useState2[1];\n  var _React$useState3 = React.useState({}),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    errorMessages = _React$useState4[0],\n    setErrorMessages = _React$useState4[1];\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    usersArray = _useState2[0],\n    setUsersArray = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userExists = _useState4[0],\n    setUserExists = _useState4[1];\n  var userIndex = null;\n  var curUserEmail;\n  var curUserPassword;\n  useEffect(function () {\n    var data = localStorage.getItem(\"usersArray\");\n    data && setUsersArray(JSON.parse(data));\n    if (data) usersArray = JSON.parse(data);\n  }, []);\n  function handleChange(event) {\n    setUser(function (prevUser) {\n      return _objectSpread(_objectSpread({}, prevUser), {}, _defineProperty({}, event.target.name, event.target.value));\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    setErrorMessages(validation());\n\n    for (var item of usersArray) {\n      if (user.email === item.email) {\n        setUserExists(true);\n        userExists = true;\n        console.log(\"item: \" + usersArray.indexOf(item));\n        userIndex = usersArray.indexOf(item);\n        console.log(usersArray[userIndex].email);\n        break;\n      } else {\n        setUserExists(false);\n        userExists = false;\n      }\n    }\n    curUserEmail = usersArray[userIndex].email;\n    curUserPassword = usersArray[userIndex].password;\n\n    if (curUserPassword === event.target.password.value) {\n      console.log(\"logged in\");\n      var currentUser = usersArray[userIndex];\n      props.setUserIndex(userIndex);\n      return currentUser;\n    }\n    if (userExists) console.log(\"user exists\");else console.log(\"user doesn't exist\");\n  }\n  function validation() {\n    var errors = {};\n    if (user.email.trim() === \"\") errors.email = \"Please fill in the email\";\n    if (user.password.trim() === \"\") errors.password = \"Please fill in the password\";\n    return errors;\n  }\n  return _jsxs(View, {\n    className: \"quiz-container\",\n    children: [_jsx(Text, {\n      style: {\n        color: \"#0c88fb\"\n      },\n      children: \"Login\"\n    }), _jsxs(View, {\n      children: [_jsx(\"label\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"Email\"\n      }), _jsx(\"input\", {\n        id: \"email\",\n        placeholder: \"email\",\n        onChange: handleChange,\n        className: \"form-control\",\n        name: \"email\",\n        value: user.email\n      }), errorMessages.email && _jsx(\"div\", {\n        className: \"errorMessages\",\n        children: errorMessages.email\n      }), _jsx(\"label\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"Password\"\n      }), _jsx(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        placeholder: \"password\",\n        onChange: handleChange,\n        className: \"form-control\",\n        name: \"password\",\n        value: user.password\n      }), errorMessages.password && _jsx(\"div\", {\n        className: \"errorMessages\",\n        children: errorMessages.password\n      }), _jsx(Button, {\n        title: \"Submit\"\n      })]\n    }), _jsxs(\"div\", {\n      children: [\"New user? Register\", \" \", _jsx(\"button\", {\n        className: \"btn btn-link\",\n        onClick: props.registerLogilToggle,\n        style: {\n          padding: \"0\",\n          marginTop: \"-5px\"\n        },\n        children: \"here\"\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","Button","RegisterScreen","LoginScreen","props","email","password","user","setUser","errorMessages","setErrorMessages","usersArray","setUsersArray","userExists","setUserExists","userIndex","curUserEmail","curUserPassword","data","localStorage","getItem","JSON","parse","handleChange","event","prevUser","target","name","value","handleSubmit","preventDefault","validation","item","console","log","indexOf","currentUser","setUserIndex","errors","trim","color","registerLogilToggle","padding","marginTop"],"sources":["C:/Users/micha/Desktop/AwesomeProject/components/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Button from \"./Button\";\r\nimport RegisterScreen from \"./RegisterScreen\";\r\nimport { View, Text } from \"react-native\";\r\n\r\nexport default function LoginScreen(props) {\r\n  const [user, setUser] = React.useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [errorMessages, setErrorMessages] = React.useState({});\r\n  let [usersArray, setUsersArray] = useState([]);\r\n  let [userExists, setUserExists] = useState(false);\r\n  let userIndex = null;\r\n  let curUserEmail;\r\n  let curUserPassword;\r\n\r\n  useEffect(() => {\r\n    //logic for getting a value from local storage stored under the key 'key'\r\n    const data = localStorage.getItem(\"usersArray\");\r\n    //if data is null don't run the next line...\r\n    data && setUsersArray(JSON.parse(data));\r\n    if (data) usersArray = JSON.parse(data);\r\n  }, []);\r\n\r\n  function handleChange(event) {\r\n    setUser((prevUser) => ({\r\n      ...prevUser,\r\n      [event.target.name]: event.target.value,\r\n    }));\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    setErrorMessages(validation());\r\n\r\n    //Does user exist?\r\n    for (const item of usersArray) {\r\n      if (user.email === item.email) {\r\n        setUserExists(true);\r\n        userExists = true;\r\n        //index to match the email and password later...\r\n        console.log(`item: ${usersArray.indexOf(item)}`);\r\n        userIndex = usersArray.indexOf(item);\r\n        console.log(usersArray[userIndex].email);\r\n\r\n        break;\r\n      } else {\r\n        setUserExists(false);\r\n        userExists = false;\r\n      }\r\n    }\r\n    curUserEmail = usersArray[userIndex].email;\r\n    curUserPassword = usersArray[userIndex].password;\r\n\r\n    //if the password is correct then login...\r\n    if (curUserPassword === event.target.password.value) {\r\n      console.log(\"logged in\");\r\n      //here must follow the login code...\r\n      //pass user data to App.js\r\n      //pass userIndex to App.js\r\n      const currentUser = usersArray[userIndex];\r\n      //how to pass currentUser to App.js\r\n      //sends the user index to App.js\r\n      props.setUserIndex(userIndex);\r\n      return currentUser;\r\n    }\r\n\r\n    if (userExists) console.log(\"user exists\");\r\n    else console.log(\"user doesn't exist\");\r\n  }\r\n\r\n  function validation() {\r\n    const errors = {};\r\n    if (user.email.trim() === \"\") errors.email = \"Please fill in the email\";\r\n    if (user.password.trim() === \"\")\r\n      errors.password = \"Please fill in the password\";\r\n    return errors;\r\n  }\r\n\r\n  return (\r\n    <View className=\"quiz-container\">\r\n      <Text style={{ color: \"#0c88fb\" }}>Login</Text>\r\n      <View>\r\n        {/* <form onSubmit={handleSubmit}> */}\r\n        <label style={{ color: \"white\" }}>Email</label>\r\n        <input\r\n          id=\"email\"\r\n          placeholder=\"email\"\r\n          onChange={handleChange}\r\n          className=\"form-control\"\r\n          name=\"email\"\r\n          value={user.email}\r\n        ></input>\r\n        {errorMessages.email && (\r\n          <div className=\"errorMessages\">{errorMessages.email}</div>\r\n        )}\r\n        <label style={{ color: \"white\" }}>Password</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"password\"\r\n          onChange={handleChange}\r\n          className=\"form-control\"\r\n          name=\"password\"\r\n          value={user.password}\r\n        ></input>\r\n        {errorMessages.password && (\r\n          <div className=\"errorMessages\">{errorMessages.password}</div>\r\n        )}\r\n        <Button title=\"Submit\" />\r\n      </View>\r\n      {/* </form> */}\r\n      <div>\r\n        New user? Register{\" \"}\r\n        <button\r\n          className=\"btn btn-link\"\r\n          onClick={props.registerLogilToggle}\r\n          style={{ padding: \"0\", marginTop: \"-5px\" }}\r\n        >\r\n          here\r\n        </button>\r\n      </div>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}